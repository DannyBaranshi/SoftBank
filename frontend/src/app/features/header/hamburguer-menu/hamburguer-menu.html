<!-- Botón Hamburguesa -->
<button class="hamburger-button" (click)="toggleMenu()" aria-label="Menú principal">
  ☰
</button>

<!-- Panel de menú -->
<div class="menu-panel" [class.open]="menuOpen()">
  <div class="menu-header">
    <div class="avatar-placeholder">
      <ng-container *ngIf="isLoggedIn; else guestIcon">
        <span *ngIf="usuarioActual">{{ usuarioActual.charAt(0).toUpperCase() }}</span>
      </ng-container>
      <ng-template #guestIcon>?</ng-template>
    </div>
    <h3 *ngIf="isLoggedIn" class="user-name">{{ usuarioActual }}</h3>
  </div>

  <div class="menu-content">
    <!-- Sesión no iniciada -->
    <div *ngIf="!isLoggedIn">
      <button class="menu-btn" (click)="openLoginModal()">Iniciar Sesión</button>
      <button class="menu-btn" (click)="openRegisterModal()">Registrarse</button>
    </div>

    <!-- Sesión iniciada -->
    <div *ngIf="isLoggedIn">
      <button class="menu-btn" (click)="navigateTo('/cuentas'); closeMenu()">Cuentas</button>
      <button class="menu-btn" (click)="navigateTo('/transferencias'); closeMenu()">Transferencias</button>
      <button class="menu-btn" (click)="navigateTo('/saldo'); closeMenu()">Saldo</button>
      <button class="menu-btn" (click)="navigateTo('/solicitar-productos'); closeMenu()">Solicitar Productos</button>
      <button class="menu-btn" (click)="navigateTo('/certificados'); closeMenu()">Certificados</button>
      <button class="menu-btn logout" (click)="openLogoutConfirm(); closeMenu(); navigateTo('/inicio')">Cerrar Sesión</button>
    </div>
  </div>
</div>

<!-- Modal Inicio de Sesión -->
<div class="modal-overlay" *ngIf="modalService.showLoginModal()" (click)="closeModal()">
  <div class="modal" role="dialog" (click)="$event.stopPropagation()">
    <h2>Iniciar Sesión</h2>
    <form (submit)="iniciarSesion($event)">
      <input type="text" placeholder="Usuario" [(ngModel)]="loginUser" name="loginUser" required />
      <input type="password" placeholder="Contraseña" [(ngModel)]="loginPassword" name="loginPassword" required />
      <div class="modal-actions">
        <button type="submit" class="btn-primary">Entrar</button>
        <button type="button" class="btn-secondary" (click)="closeModal()">Cancelar</button>
      </div>
    </form>
  </div>
</div>

<!-- Modal Registro -->
<div class="modal-overlay" *ngIf="showRegisterModal" (click)="closeModal()">
  <div class="modal" role="dialog" (click)="$event.stopPropagation()">
    <h2>Registro de Usuario</h2>
    <form (submit)="registrarUsuario($event)">
      <input type="text" placeholder="Nuevo Usuario" [(ngModel)]="registerUser" name="registerUser" required />
      <input type="password" placeholder="Contraseña" [(ngModel)]="registerPassword" name="registerPassword" required />
      <input type="password" placeholder="Confirmar Contraseña" [(ngModel)]="registerConfirmPassword" name="registerConfirmPassword" required />

      <input type="text" placeholder="Cédula" [(ngModel)]="registerCedula" name="registerCedula" />
      <input type="text" placeholder="Nombre" [(ngModel)]="registerNombre" name="registerNombre" />
      <input type="text" placeholder="Apellido" [(ngModel)]="registerApellido" name="registerApellido" />
      <input type="email" placeholder="Correo electrónico" [(ngModel)]="registerCorreo" name="registerCorreo" />
      <input type="tel" placeholder="Teléfono" [(ngModel)]="registerTelefono" name="registerTelefono" />
      <div class="modal-actions">
        <button type="submit" class="btn-primary">Registrar</button>
        <button type="button" class="btn-secondary" (click)="closeModal()">Cancelar</button>
      </div>
    </form>
  </div>
</div>

<!-- Modal Confirmar Cierre de Sesión -->
<div class="modal-overlay" *ngIf="showLogoutConfirm" (click)="cancelLogout()">
  <div class="modal" role="dialog" (click)="$event.stopPropagation()">
    <h2>¿Desea cerrar sesión?</h2>
    <div class="modal-actions">
      <button class="btn-primary" (click)="confirmarCerrarSesion()">Sí, cerrar</button>
      <button class="btn-secondary" (click)="cancelLogout()">Cancelar</button>
    </div>
  </div>
</div>